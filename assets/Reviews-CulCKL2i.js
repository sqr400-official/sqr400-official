import{j as e,c as g,d as j,r as x,T as f,a as y,b}from"./index-DTy8VP7J.js";const N="_reviewCard_k7cla_1",R="_userInfo_k7cla_23",S="_avatar_k7cla_35",C="_reviewText_k7cla_63",F="_rating_k7cla_73",T="_star_k7cla_83",n={reviewCard:N,userInfo:R,avatar:S,reviewText:C,rating:F,star:T},k=({review:t})=>e.jsxs("div",{className:n.reviewCard,children:[e.jsxs("div",{className:n.userInfo,children:[e.jsx("div",{className:n.avatar,children:e.jsx("img",{src:`${"/sqr400-official".replace(/\/?$/,"/")}images/avatar.jpg`,alt:"Avatar",loading:"lazy"})}),e.jsxs("div",{children:[e.jsx("strong",{children:t.name})," â€“ ",t.date]})]}),e.jsx("p",{className:n.reviewText,children:t.comment}),e.jsx("div",{className:n.rating,children:[...Array(5)].map((i,r)=>r<t.rating?e.jsx(g,{className:n.star},r):e.jsx(j,{className:n.star},r))})]}),I="_reviewForm_1avw3_1",A="_inputField_1avw3_27",B="_textarea_1avw3_27",P="_stars_1avw3_55",$="_star_1avw3_55",D="_submitButton_1avw3_85",m={reviewForm:I,inputField:A,textarea:B,stars:P,star:$,submitButton:D},E=({onSubmit:t})=>{const[i,r]=x.useState("Anonymous"),[v,o]=x.useState(""),[c,w]=x.useState(0),[h,l]=x.useState(0),[s,a]=x.useState({show:!1,message:"",type:""}),u=d=>{if(d.preventDefault(),!i||!v||c===0){a({show:!0,message:"Please fill in all fields!",type:"warning"}),setTimeout(()=>a({show:!1,message:"",type:""}),3e3);return}const p={name:i,date:new Date().toLocaleDateString(),comment:v,rating:c};t(p),a({show:!0,message:"Your review has been submitted!",type:"success"}),setTimeout(()=>a({show:!1,message:"",type:""}),3e3),o(""),w(0),l(0)};return e.jsxs("div",{className:m.reviewForm,children:[e.jsx("h3",{children:"Write a Review"}),e.jsxs("form",{onSubmit:u,children:[e.jsx("input",{type:"text",placeholder:"Your name",value:i,onChange:d=>r(d.target.value),disabled:!0,className:m.inputField}),e.jsx("div",{className:m.stars,children:[...Array(5)].map((d,p)=>{const _=p+1;return e.jsxs("label",{children:[e.jsx("input",{type:"radio",name:"rating",value:_,onClick:()=>w(_)}),e.jsx(g,{className:m.star,size:20,color:_<=(h||c)?"orange":"#ccc",onMouseEnter:()=>l(_),onMouseLeave:()=>l(0)})]},p)})}),e.jsx("textarea",{placeholder:"Write your review...",value:v,onChange:d=>o(d.target.value),required:!0,className:m.textarea}),e.jsx("button",{type:"submit",className:m.submitButton,children:"Submit Review"})]}),s.show&&e.jsx(f,{message:s.message,type:s.type})]})},q=()=>{var l;const{reviews:t,setReviews:i,products:r}=y(),{id:v}=b(),o=Number(v),c=r.find(s=>s.id===o),w=((l=t.find(s=>s.productId===o))==null?void 0:l.reviews)||[],h=s=>{i(a=>a.map(u=>u.productId===o?{...u,reviews:[...u.reviews,s]}:u))};return c?e.jsxs("div",{children:[e.jsxs("h2",{children:["Reviews for ",c.name]}),w.length>0?w.map((s,a)=>e.jsx(k,{review:s},a)):e.jsx("p",{children:"No reviews yet. Be the first to review this product!"}),e.jsx(E,{onSubmit:h})]}):e.jsx("p",{children:"Product not found."})};export{q as default};
