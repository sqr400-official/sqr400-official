import{j as t,P as l,r as m,o as P,p as f,q as g,s as A,t as N,L as v}from"./index-BpsviVg6.js";const y="_modalOverlay_2zg47_3",B="_modalContent_2zg47_35",S="_modalActions_2zg47_73",u={modalOverlay:y,modalContent:B,modalActions:S},h=({children:o,onConfirm:r,onCancel:i,disabled:n})=>t.jsx("div",{className:u.modalOverlay,children:t.jsxs("div",{className:u.modalContent,children:[t.jsx("p",{children:o}),t.jsxs("div",{className:u.modalActions,children:[t.jsx("button",{disabled:n,onClick:r,children:"Confirm"}),t.jsx("button",{disabled:n,onClick:i,children:"Cancel"})]})]})});h.propTypes={children:l.node,onConfirm:l.func.isRequired,onCancel:l.func.isRequired,disabled:l.bool};h.defaultProps={children:"Are you sure?"};const w="_postsContainer_1puta_1",D="_postsContainerInner_1puta_17",I="_noPostFound_1puta_29",F="_loaderContainer_1puta_39",b="_allPostsHeader_1puta_53",k="_adminPostCard_1puta_81",L="_meta_1puta_157",O="_adminAddPostButtons_1puta_185",q="_deleteButton_1puta_229",s={postsContainer:w,postsContainerInner:D,noPostFound:I,loaderContainer:F,allPostsHeader:b,adminPostCard:k,meta:L,adminAddPostButtons:O,deleteButton:q},H=()=>{const[o,r]=m.useState(""),[i,n]=m.useState(!1),[_,x]=m.useState(null),{posts:a=[],isLoadingPost:d}=P(),{isDeleting:C,deletePost:j}=f(),c=o.trim()?a.filter(e=>e.title.toLowerCase().includes(o.toLowerCase())):a;return t.jsxs(t.Fragment,{children:[i&&t.jsx(h,{onConfirm:async()=>{await j(_),n(!1)},disabled:C,onCancel:()=>n(!1),children:"Delete this post?"}),t.jsxs("div",{className:s.postsContainer,children:[t.jsxs("div",{className:s.allPostsHeader,children:[t.jsx("h1",{children:"Posts"}),t.jsx(g,{query:o,setQuery:r})]}),t.jsxs("div",{className:s.postsContainerInner,children:[d&&t.jsx("div",{className:s.loaderContainer,children:t.jsx(A,{})}),!d&&a.length===0&&t.jsx("p",{className:s.noPostFound,children:"No posts found"}),!d&&a.length>0&&c.length===0&&t.jsx("p",{className:s.noPostFound,children:"Query not found"}),!d&&c.length>0&&c.map((e,p)=>t.jsxs("div",{className:s.adminPostCard,children:[t.jsx("h2",{children:N(e.title,20)}),t.jsx("img",{src:e.coverImage,alt:e.title}),t.jsxs("p",{className:s.meta,children:[t.jsx("span",{children:e.author}),t.jsx("time",{dateTime:e.createdAt?new Date(e.createdAt).toISOString():"",children:e.createdAt?new Date(e.createdAt).toDateString():"Unknown Date"})]}),t.jsxs("div",{className:s.adminAddPostButtons,children:[t.jsx(v,{to:`/admin/edit-post/${e.id}`,className:s.editButton,children:"Edit"}),t.jsx("button",{className:s.deleteButton,onClick:()=>{x(e.id),n(!0)},children:"Delete"})]})]},p))]})]})]})},E=()=>t.jsx(t.Fragment,{children:t.jsx(H,{})});export{E as default};
