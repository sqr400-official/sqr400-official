import{b as S,u as b,r,j as e,T as C}from"./index-BpsviVg6.js";import{s,S as P}from"./SuccessModal-CYEotbf-.js";import{u as T}from"./usePosts-DD3QaRCh.js";const w=()=>{const{posts:p,handleEdit:x}=T(),{id:c}=S(),l=b(),o=p.find(a=>a.id===c),[t,u]=r.useState(o||{title:"",excerpt:"",coverImage:"",content:""}),[h,d]=r.useState(!1),[j,i]=r.useState(!1);r.useEffect(()=>{o?u(o):(console.error("Post not found!"),l("/admin/all-posts"))},[o,l]);const n=a=>{const{name:m,value:v}=a.target;u(g=>({...g,[m]:v}))},f=async a=>{if(a.preventDefault(),!t.title.trim()||!t.content.trim()){d(!0),setTimeout(()=>d(!1),5e3);return}await x(c,t)&&(i(!0),setTimeout(()=>{i(!1),l("/admin/all-posts")},2e3))};return e.jsxs("div",{className:s.createPostContainer,children:[e.jsx("h2",{children:"Edit Post"}),e.jsxs("form",{onSubmit:f,className:s.editPostForm,children:[e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:n,required:!0})]}),e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Excerpt:"}),e.jsx("input",{type:"text",name:"excerpt",value:t.excerpt,onChange:n})]}),e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Cover Image URL:"}),e.jsx("input",{type:"text",name:"coverImage",value:t.coverImage,onChange:n})]}),e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Content:"}),e.jsx("textarea",{name:"content",value:t.content,onChange:n,required:!0})]}),e.jsx("button",{type:"submit",className:s.postSubmitBtn,children:"Update Post"})]}),h&&e.jsx(C,{message:"Title and Content are required!",type:"warning"}),j&&e.jsx(P,{message:"Post Updated Successfully!",onClose:()=>i(!1)})]})};export{w as default};
