import{n as C,r as o,u as S,v as u,j as e,T as f}from"./index-BpsviVg6.js";import{s,S as b}from"./SuccessModal-CYEotbf-.js";const y=()=>{const{createPost:m,isCreatingPost:l}=C(),[d,i]=o.useState(!1),[x,n]=o.useState(!1),p=S(),[t,c]=o.useState({id:u(),title:"",author:"admin",createdAt:new Date().toISOString(),coverImage:"",excerpt:"",content:""}),a=r=>{const{name:g,value:j}=r.target;c(v=>({...v,[g]:j}))},h=r=>{if(r.preventDefault(),!t.title.trim()||!t.content.trim()){i(!0),setTimeout(()=>i(!1),5e3);return}m(t,{onSuccess:()=>{n(!0),setTimeout(()=>{n(!1),p("/admin/all-posts")},2e3),c({id:u(),title:"",author:"admin",createdAt:new Date().toISOString(),coverImage:"",excerpt:"",content:""})}})};return e.jsxs("div",{className:s.createPostContainer,children:[e.jsx("h2",{children:"Create New Post"}),e.jsxs("form",{onSubmit:h,className:s.createPostForm,children:[e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Title:"}),e.jsx("input",{type:"text",name:"title",value:t.title,onChange:a,required:!0})]}),e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Excerpt:"}),e.jsx("input",{type:"text",name:"excerpt",value:t.excerpt,onChange:a})]}),e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Cover Image URL:"}),e.jsx("input",{type:"text",name:"coverImage",value:t.coverImage,onChange:a})]}),e.jsxs("div",{className:s.postFormGroup,children:[e.jsx("label",{children:"Content:"}),e.jsx("textarea",{name:"content",value:t.content,onChange:a,required:!0})]}),e.jsx("button",{type:"submit",className:s.postSubmitBtn,disabled:l,children:l?"Creating...":"Add Post"})]}),d&&e.jsx(f,{message:"Title and Content are required!",type:"warning"}),x&&e.jsx(b,{message:"Post Created Successfully!",onClose:()=>n(!1)})]})};export{y as default};
